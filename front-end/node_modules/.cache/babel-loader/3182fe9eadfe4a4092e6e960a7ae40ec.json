{"ast":null,"code":"export var COMMON_MIME_TYPES = new Map([['avi', 'video/avi'], ['gif', 'image/gif'], ['ico', 'image/x-icon'], ['jpeg', 'image/jpeg'], ['jpg', 'image/jpeg'], ['mkv', 'video/x-matroska'], ['mov', 'video/quicktime'], ['mp4', 'video/mp4'], ['pdf', 'application/pdf'], ['png', 'image/png'], ['zip', 'application/zip'], ['doc', 'application/msword'], ['docx', 'application/vnd.openxmlformats-officedocument.wordprocessingml.document']]);\nexport function toFileWithPath(file, path) {\n  var f = withMimeType(file);\n\n  if (typeof f.path !== 'string') {\n    // on electron, path is already set to the absolute path\n    var webkitRelativePath = file.webkitRelativePath;\n    Object.defineProperty(f, 'path', {\n      value: typeof path === 'string' ? path // If <input webkitdirectory> is set,\n      // the File will have a {webkitRelativePath} property\n      // https://developer.mozilla.org/en-US/docs/Web/API/HTMLInputElement/webkitdirectory\n      : typeof webkitRelativePath === 'string' && webkitRelativePath.length > 0 ? webkitRelativePath : file.name,\n      writable: false,\n      configurable: false,\n      enumerable: true\n    });\n  }\n\n  return f;\n}\n\nfunction withMimeType(file) {\n  var name = file.name;\n  var hasExtension = name && name.lastIndexOf('.') !== -1;\n\n  if (hasExtension && !file.type) {\n    var ext = name.split('.').pop().toLowerCase();\n    var type = COMMON_MIME_TYPES.get(ext);\n\n    if (type) {\n      Object.defineProperty(file, 'type', {\n        value: type,\n        writable: false,\n        configurable: false,\n        enumerable: true\n      });\n    }\n  }\n\n  return file;\n}","map":{"version":3,"sources":["../../src/file.ts"],"names":[],"mappings":"AAAA,OAAO,IAAM,iBAAiB,GAAG,IAAI,GAAJ,CAAQ,CACrC,CAAC,KAAD,EAAQ,WAAR,CADqC,EAErC,CAAC,KAAD,EAAQ,WAAR,CAFqC,EAGrC,CAAC,KAAD,EAAQ,cAAR,CAHqC,EAIrC,CAAC,MAAD,EAAS,YAAT,CAJqC,EAKrC,CAAC,KAAD,EAAQ,YAAR,CALqC,EAMrC,CAAC,KAAD,EAAQ,kBAAR,CANqC,EAOrC,CAAC,KAAD,EAAQ,iBAAR,CAPqC,EAQrC,CAAC,KAAD,EAAQ,WAAR,CARqC,EASrC,CAAC,KAAD,EAAQ,iBAAR,CATqC,EAUrC,CAAC,KAAD,EAAQ,WAAR,CAVqC,EAWrC,CAAC,KAAD,EAAQ,iBAAR,CAXqC,EAYrC,CAAC,KAAD,EAAQ,oBAAR,CAZqC,EAarC,CAAC,MAAD,EAAS,yEAAT,CAbqC,CAAR,CAA1B;AAiBP,OAAM,SAAU,cAAV,CAAyB,IAAzB,EAA6C,IAA7C,EAA0D;AAC5D,MAAM,CAAC,GAAG,YAAY,CAAC,IAAD,CAAtB;;AACA,MAAI,OAAO,CAAC,CAAC,IAAT,KAAkB,QAAtB,EAAgC;AAAE;AACvB,QAAA,kBAAkB,GAAI,IAA0B,CAA9B,kBAAlB;AACP,IAAA,MAAM,CAAC,cAAP,CAAsB,CAAtB,EAAyB,MAAzB,EAAiC;AAC7B,MAAA,KAAK,EAAE,OAAO,IAAP,KAAgB,QAAhB,GACD,IADC,CAEH;AACA;AACA;AAJG,QAKD,OAAO,kBAAP,KAA8B,QAA9B,IAA0C,kBAAkB,CAAC,MAAnB,GAA4B,CAAtE,GACI,kBADJ,GAEI,IAAI,CAAC,IARc;AAS7B,MAAA,QAAQ,EAAE,KATmB;AAU7B,MAAA,YAAY,EAAE,KAVe;AAW7B,MAAA,UAAU,EAAE;AAXiB,KAAjC;AAaH;;AAED,SAAO,CAAP;AACH;;AAeD,SAAS,YAAT,CAAsB,IAAtB,EAAwC;AAC7B,MAAA,IAAI,GAAI,IAAI,CAAR,IAAJ;AACP,MAAM,YAAY,GAAG,IAAI,IAAI,IAAI,CAAC,WAAL,CAAiB,GAAjB,MAA0B,CAAC,CAAxD;;AAEA,MAAI,YAAY,IAAI,CAAC,IAAI,CAAC,IAA1B,EAAgC;AAC5B,QAAM,GAAG,GAAG,IAAI,CAAC,KAAL,CAAW,GAAX,EACP,GADO,GACA,WADA,EAAZ;AAEA,QAAM,IAAI,GAAG,iBAAiB,CAAC,GAAlB,CAAsB,GAAtB,CAAb;;AACA,QAAI,IAAJ,EAAU;AACN,MAAA,MAAM,CAAC,cAAP,CAAsB,IAAtB,EAA4B,MAA5B,EAAoC;AAChC,QAAA,KAAK,EAAE,IADyB;AAEhC,QAAA,QAAQ,EAAE,KAFsB;AAGhC,QAAA,YAAY,EAAE,KAHkB;AAIhC,QAAA,UAAU,EAAE;AAJoB,OAApC;AAMH;AACJ;;AAED,SAAO,IAAP;AACH","sourceRoot":"","sourcesContent":["export var COMMON_MIME_TYPES = new Map([\r\n    ['avi', 'video/avi'],\r\n    ['gif', 'image/gif'],\r\n    ['ico', 'image/x-icon'],\r\n    ['jpeg', 'image/jpeg'],\r\n    ['jpg', 'image/jpeg'],\r\n    ['mkv', 'video/x-matroska'],\r\n    ['mov', 'video/quicktime'],\r\n    ['mp4', 'video/mp4'],\r\n    ['pdf', 'application/pdf'],\r\n    ['png', 'image/png'],\r\n    ['zip', 'application/zip'],\r\n    ['doc', 'application/msword'],\r\n    ['docx', 'application/vnd.openxmlformats-officedocument.wordprocessingml.document']\r\n]);\r\nexport function toFileWithPath(file, path) {\r\n    var f = withMimeType(file);\r\n    if (typeof f.path !== 'string') { // on electron, path is already set to the absolute path\r\n        var webkitRelativePath = file.webkitRelativePath;\r\n        Object.defineProperty(f, 'path', {\r\n            value: typeof path === 'string'\r\n                ? path\r\n                // If <input webkitdirectory> is set,\r\n                // the File will have a {webkitRelativePath} property\r\n                // https://developer.mozilla.org/en-US/docs/Web/API/HTMLInputElement/webkitdirectory\r\n                : typeof webkitRelativePath === 'string' && webkitRelativePath.length > 0\r\n                    ? webkitRelativePath\r\n                    : file.name,\r\n            writable: false,\r\n            configurable: false,\r\n            enumerable: true\r\n        });\r\n    }\r\n    return f;\r\n}\r\nfunction withMimeType(file) {\r\n    var name = file.name;\r\n    var hasExtension = name && name.lastIndexOf('.') !== -1;\r\n    if (hasExtension && !file.type) {\r\n        var ext = name.split('.')\r\n            .pop().toLowerCase();\r\n        var type = COMMON_MIME_TYPES.get(ext);\r\n        if (type) {\r\n            Object.defineProperty(file, 'type', {\r\n                value: type,\r\n                writable: false,\r\n                configurable: false,\r\n                enumerable: true\r\n            });\r\n        }\r\n    }\r\n    return file;\r\n}\r\n//# sourceMappingURL=file.js.map"]},"metadata":{},"sourceType":"module"}